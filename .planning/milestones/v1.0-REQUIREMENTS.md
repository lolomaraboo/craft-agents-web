# Requirements Archive: v1.0 Web Foundation

**Archived:** 2026-01-28
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Craft Agents Web

**Defined:** 2026-01-27
**Core Value:** Browser-based Claude agent access with 100% feature parity

## v1.0 Requirements

Requirements for Web Foundation milestone. Each maps to roadmap phases.

### Server Foundation

- [x] **SRVR-01**: Fastify HTTP server starts and listens on configurable port — ✅ SHIPPED Phase 1
- [x] **SRVR-02**: WebSocket server accepts connections and manages client lifecycle — ✅ SHIPPED Phase 1
- [x] **SRVR-03**: Static file serving delivers React app bundle — ✅ SHIPPED Phase 1
- [x] **SRVR-04**: Development server supports hot reload for frontend changes — ✅ SHIPPED Phase 1
- [x] **SRVR-05**: Server gracefully shuts down on SIGTERM/SIGINT — ✅ SHIPPED Phase 1

### API Layer

- [x] **API-01**: Session CRUD endpoints (create, read, list, delete) — ✅ SHIPPED Phase 2
- [x] **API-02**: Session message endpoint accepts user messages — ✅ SHIPPED Phase 2
- [x] **API-03**: Session abort endpoint cancels in-progress requests — ✅ SHIPPED Phase 2
- [x] **API-04**: Workspace CRUD endpoints (create, read, list, update, delete) — ✅ SHIPPED Phase 2
- [x] **API-05**: Config endpoints (get, update, watch) — ✅ SHIPPED Phase 2
- [x] **API-06**: Credential endpoints (list, add, remove) — server-side only — ✅ SHIPPED Phase 2
- [x] **API-07**: MCP server endpoints (list, connect, disconnect) — ✅ SHIPPED Phase 2
- [x] **API-08**: Theme endpoints (get, update, per-workspace overrides) — ✅ SHIPPED Phase 2

### Real-time Communication

- [x] **RTCM-01**: WebSocket broadcasts agent response events (streaming) — ✅ SHIPPED Phase 3
- [x] **RTCM-02**: WebSocket broadcasts tool use events — ✅ SHIPPED Phase 3
- [x] **RTCM-03**: WebSocket handles permission request/response flow — ✅ SHIPPED Phase 3
- [x] **RTCM-04**: WebSocket broadcasts config change notifications — ✅ SHIPPED Phase 3
- [x] **RTCM-05**: WebSocket supports session-scoped event filtering — ✅ SHIPPED Phase 3
- [x] **RTCM-06**: WebSocket reconnection maintains session context — ✅ SHIPPED Phase 3

### File Handling

- [x] **FILE-01**: File upload API accepts multipart form data — ✅ SHIPPED Phase 4
- [x] **FILE-02**: File upload stores to server filesystem (configurable path) — ✅ SHIPPED Phase 4
- [x] **FILE-03**: File download endpoint serves uploaded attachments — ✅ SHIPPED Phase 4
- [x] **FILE-04**: File cleanup removes orphaned attachments — ✅ SHIPPED Phase 4

### OAuth & Auth

- [x] **AUTH-01**: OAuth start endpoint initiates PKCE flow — ✅ SHIPPED Phase 5
- [x] **AUTH-02**: OAuth callback endpoint handles provider response — ✅ SHIPPED Phase 5
- [x] **AUTH-03**: OAuth tokens stored server-side (encrypted) — ✅ SHIPPED Phase 5
- [x] **AUTH-04**: Google OAuth provider supported — ✅ SHIPPED Phase 5
- [x] **AUTH-05**: Slack OAuth provider supported — ✅ SHIPPED Phase 5
- [x] **AUTH-06**: Microsoft OAuth provider supported — ✅ SHIPPED Phase 5
- [x] **AUTH-07**: OAuth refresh flow handles token expiration — ✅ SHIPPED Phase 5

### Frontend Adaptation

- [x] **FRNT-01**: HTTP client adapter replaces window.electronAPI — ✅ SHIPPED Phase 6
- [x] **FRNT-02**: WebSocket manager subscribes to server events — ✅ SHIPPED Phase 6
- [x] **FRNT-03**: Loading states shown during async operations — ✅ SHIPPED Phase 6
- [x] **FRNT-04**: Error boundaries handle network failures gracefully — ✅ SHIPPED Phase 6
- [x] **FRNT-05**: Frontend uses same React components as Electron app — ⚠️ PARTIAL Phase 6 (infrastructure complete, full migration pending)
- [x] **FRNT-06**: Theme system works via HTTP API (not IPC) — ✅ SHIPPED Phase 6

## Traceability

Which phases cover which requirements.

| Requirement | Phase | Status |
|-------------|-------|--------|
| SRVR-01 | Phase 1 | ✅ Complete |
| SRVR-02 | Phase 1 | ✅ Complete |
| SRVR-03 | Phase 1 | ✅ Complete |
| SRVR-04 | Phase 1 | ✅ Complete |
| SRVR-05 | Phase 1 | ✅ Complete |
| API-01 | Phase 2 | ✅ Complete |
| API-02 | Phase 2 | ✅ Complete |
| API-03 | Phase 2 | ✅ Complete |
| API-04 | Phase 2 | ✅ Complete |
| API-05 | Phase 2 | ✅ Complete |
| API-06 | Phase 2 | ✅ Complete |
| API-07 | Phase 2 | ✅ Complete |
| API-08 | Phase 2 | ✅ Complete |
| RTCM-01 | Phase 3 | ✅ Complete |
| RTCM-02 | Phase 3 | ✅ Complete |
| RTCM-03 | Phase 3 | ✅ Complete |
| RTCM-04 | Phase 3 | ✅ Complete |
| RTCM-05 | Phase 3 | ✅ Complete |
| RTCM-06 | Phase 3 | ✅ Complete |
| FILE-01 | Phase 4 | ✅ Complete |
| FILE-02 | Phase 4 | ✅ Complete |
| FILE-03 | Phase 4 | ✅ Complete |
| FILE-04 | Phase 4 | ✅ Complete |
| AUTH-01 | Phase 5 | ✅ Complete |
| AUTH-02 | Phase 5 | ✅ Complete |
| AUTH-03 | Phase 5 | ✅ Complete |
| AUTH-04 | Phase 5 | ✅ Complete |
| AUTH-05 | Phase 5 | ✅ Complete |
| AUTH-06 | Phase 5 | ✅ Complete |
| AUTH-07 | Phase 5 | ✅ Complete |
| FRNT-01 | Phase 6 | ✅ Complete |
| FRNT-02 | Phase 6 | ✅ Complete |
| FRNT-03 | Phase 6 | ✅ Complete |
| FRNT-04 | Phase 6 | ✅ Complete |
| FRNT-05 | Phase 6 | ⚠️ Partial (infrastructure ready) |
| FRNT-06 | Phase 6 | ✅ Complete |

**Coverage:**
- v1.0 requirements: 36 total
- Fully satisfied: 35 (97%)
- Partially satisfied: 1 (FRNT-05 - infrastructure complete, broader scope needed)

---

## Milestone Summary

**Shipped:** 35 of 36 v1.0 requirements fully satisfied, 1 partial (97% complete)

**Adjusted:**
- FRNT-05 scoped as infrastructure delivery (HttpAdapter, WebSocketManager, error boundaries, loading states). Full 148-component migration recognized as broader scope requiring additional phases.

**Dropped:** None - all requirements addressed

**Technical Debt:**
- Real CraftAgent integration (mock agent used in Phase 3)
- Full UI component migration (infrastructure ready, systematic migration pending)
- File upload/download UI components (API functional)
- OAuth flow trigger UI (routes functional)
- Permission approval dialog UI (WebSocket flow complete)

---

_Archived: 2026-01-28 as part of v1.0 milestone completion_
